<!DOCTYPE html>
<html>
  <head>
    <title>Hitung Jarak</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <body>
    <div class="container">
      <div class="row d-flex justify-content-center">
        <div class="col-sm-12">
          <h1>HTML Geolocation</h1>
          <p>Klik tombol untuk menghitung jarak</p>
      
          <button class="btn btn-primary btn-lg" onclick="getLocation()">Jarak dari titik pusat</button>
      
          <p id="demo"></p>
        </div>
      </div>
    </div>
   

    <script>
      const x = document.getElementById("demo");
      let latitude;
      let longitude;
        let jarak;
      let latSMK1=4.29850;
      let longSMK1=98.04016;

      function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition);
        } else {
          x.innerHTML = "Geolocation is not supported by this browser.";
        }
      }

      function showPosition(position) {
        //   x.innerHTML = "Latitude: " + position.coords.latitude +
        //   "<br>Longitude: " + position.coords.longitude;
        latitude = position.coords.latitude;
        longitude = position.coords.longitude;
        hitungjarak(latSMK1,longSMK1,latitude,longitude);
      }
      function hitungjarak(lat1,long1,lat2,long2,unit='kilometers'){
        let theta=long1-long2;
        let distance=60*1.1515*(180/Math.PI)*Math.acos(
            Math.sin(lat1*(Math.PI/180))*Math.sin(lat2*(Math.PI/180))+Math.cos(lat1*(Math.PI/180))*Math.cos(lat2*(Math.PI/180))*Math.cos(theta*(Math.PI/180))
        );
        if (unit=='miles'){
            jarak=Math.round(distance);
            
        }else if(unit=='kilometers'){
            jarak=distance*1.609344;
        }
        x.innerHTML =Math.round(jarak*1000)+" meter"
      }
    </script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>
